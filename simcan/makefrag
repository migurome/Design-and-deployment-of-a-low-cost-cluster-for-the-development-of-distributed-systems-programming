# this file automatically gets inserted into Makefiles generated by opp_makemake

# preserve default target
all: checkdirs $(TARGET)

checkdirs:	
	@if ! [ -f $(OMNETPP_INCL_DIR)/omnetpp.h ]; then \
	    echo '-----------------------------------------------------------------'; \
	    echo 'Error: $(OMNETPP_INCL_DIR) does not have omnetpp.h in it -- your'; \
	    echo 'omnetppconfig file is probably out of date. Please re-generate it'; \
	    echo 'with "opp_makemake -f --genconfig omnetppconfig", then run make again.'; \
	    echo '-----------------------------------------------------------------'; \
	    exit 1; \
	fi

# all _m.h files must exist before we build anything, so run opp_msgc first
subdirs $(OBJS) : generateheaders

# add dependencies across directories
bin:Base Applications IO OperatingSystems Nodes SMS Util Messages


# documentation targets
DOC_DIR=doc

docs: doxy neddoc

doxy:
	doxygen Doxyfile

neddoc:
	opp_neddoc -o $(DOC_DIR)/neddoc -t $(DOC_DIR)/doxy/doxytags.xml -d ../doxy *.ned *.msg $(SUBDIRS) Examples doc/extraPages
	
neddoc-without-doxy:
	opp_neddoc -o $(DOC_DIR)/neddoc *.ned *.msg $(SUBDIRS)
